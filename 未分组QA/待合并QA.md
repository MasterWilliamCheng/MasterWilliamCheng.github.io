
* 服务器QPS是多少\
1.最近一份工作的系统QPS不高，但是数据库数据量非常高->引导数据库问题及优化，kafka问题及优化\
2.之前有在互联网公司工作过，在高峰期比如上线活动的时候，x位数的QPS->高并发场景

----------

* 服务容灾怎么做的\
**容错**：发生故障时，如何让系统继续运行而不至于停止。比如Hystrix的熔断和服务降级功能。\
**容灾**：容灾相比于容错是更大的系统故障，是整个系统因一些外界条件造成整体故障，比如地震，火灾。因为在异地建立了多处相同的服务系统，可以进行系统的切换，并且不会造成系统的中断，保证服务正常运行。\
**高可用**：系统中断时，如何尽快恢复，系统能正常运行的时间占总时间的百分比要达到99.99%。

----------

* 谈一下分布式，微服务\
分布式更强调不同服务模块部署在不同服务器上，降低服务整体的压力，服务之间通过rpc框架调用。而微服务是一种架构，拿springcloud为例，它包含了服务发现注册，网关，熔断器，负载均衡，配置中心几大组件，更强调服务能力的拆分。

----------

* RPC如何实现\
客户端先动态代理生成要调用对象接口的代理对象，在这个代理对象的调用方法中，客户端从服务注册中心获取调用服务的地址信息（如果是集群化部署，还需要通过负载均衡来分配资源），序列化请求参数并发起socket请求进行远程调用，服务端接收请求参数后，先进行反序列化操作，再通过反射调用接口实现方法，并返回序列化后的结果。

----------

* poll，select与epoll\
都是IO多路复用机制，select和poll需要轮询IO，有连接数限制，时间复杂度O(n)，epoll是让IO注册回调函数，避免轮询操作，时间复杂度O(1)。

----------

* 三次握手和四次挥手\
**三次握手**：\
1.客户端发送SYN数据包给服务端，服务端接收到后（**服务端**确认客户端发送正常，服务端接收正常），发送SYN/ACK数据包给客户端，客户端接收到后（**客户端**确认客户端发送正常，接收正常，服务端发送正常，接收正常），发送ACK数据包给服务端，服务端接收，完成连接（**服务端**确认客户端接收正常，服务端发送正常）。\
**四次挥手**：\
客户端先发送一个FIN数据包，同时停止发送数据，进入FIN-WAIT状态；服务端接收到数据，发送ACK数据包，进入CLOSE-WAIT状态，此时仍能继续发送数据，客户端也还可以继续接收数据；数据都传输完毕后，服务端发送一个FIN数据包，进入LAST-ACK状态，等待客户端确认释放；客户端接收到之后，发送ACK数据包，进入TIME-WAIT状态，等待2∗MSL（报文最大生存时间）的时间，服务端接收到确认消息后就会关闭连接，客户端如果在等待时间内都收不到服务端重试消息后，说明服务端已经关闭了，客户端此时也会关闭连接。客户端会晚于服务端关闭，这是为了确保第四次挥手的ACK能被服务器接收到，并保证所有的旧报文都在网络中消失。

----------

* 拥塞窗口\
**网络拥塞**：如果发送端发送的数据包超过了接收端的接收能力，导致网络性能变差，吞吐量下降。\
**拥塞窗户(cwnd)**：指某一源端数据流在一个RTT（Round Trip Time，也就是一个数据包从发出去到回来的时间）内可以最多发送的数据包数，它是动态变化的。TCP通过拥塞窗口来控制发送端的数据包大小，使得整体的吞吐量能保证一个合理的范围，不会引起网络拥塞，导致丢包。\
推荐相关博客可以参考学习\
[TCP的拥塞控制](https://www.huaweicloud.com/articles/912cb7c3b49f2a5bc792a140bb4d7a87.html)

----------

* 端口重用（SO_REUSEADDR）\
一般socket连接需要五元素，即协议，源ip，源端口，目标ip，目标端口。端口复用允许在一个应用程序可以把 n 个套接字绑在一个端口上而不出错。如果一个socket处于TIME_WAIT状态，还未完全释放连接，一个相同源ip+端口号的socket无法开启，会提示端口已经被占用，如果开启端口重用SO_REUSEADDR，就可以绑定了。

----------

* tcp，udp，http，ip，socket\
在网络分层中，tcp和udp是传输层协议，ip是网络层协议，http是应用层协议，socket是tcp/udp协议的一种抽象，类似实现方式\
**TCP和UDP区别**\
![image](https://user-images.githubusercontent.com/31581862/131347375-4c3eccb3-eff2-4353-a402-7c3f843b8d8f.png)

推荐相关博客学习\
[TCP 的那些事儿（上）](https://coolshell.cn/articles/11564.html)\
[TCP 的那些事儿（下）](https://coolshell.cn/articles/11609.html)

----------

* 环形buffer

